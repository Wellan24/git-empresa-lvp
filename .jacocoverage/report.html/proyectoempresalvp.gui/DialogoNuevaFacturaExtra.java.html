<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>DialogoNuevaFacturaExtra.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;ProyectoEmpresaLVP&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">proyectoempresalvp.gui</a> &gt; <span class="el_source">DialogoNuevaFacturaExtra.java</span></div><h1>DialogoNuevaFacturaExtra.java</h1><pre class="source lang-java linenums">/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package proyectoempresalvp.gui;

import java.util.ArrayList;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import proyectoempresalvp.datos.FacturaExtra;
import proyectoempresalvp.datos.FacturaExtraDetalles;
import proyectoempresalvp.datos.Fecha;
import proyectoempresalvp.datosUI.JPanelTranslucido;
import proyectoempresalvp.datosUI.PanelImagen;
import proyectoempresalvp.gestoras.Gestora;
import proyectoempresalvp.gestoras.GestoraBaseDatos;
import proyectoempresalvp.gestoras.Datos.GestoraDatos;

/**
 *
 * @author Oscar
 */
public class DialogoNuevaFacturaExtra extends javax.swing.JDialog {
    
<span class="nc" id="L26">    ArrayList&lt;FacturaExtraDetalles&gt; conceptos = new ArrayList();</span>
//  CAMBIAR EL IVA POR LA CONFIGURACION!!!!!!!!!!!!!!!!!!!!!!

    /**
     * Creates new form DialogoNuevaFacturaExtra
     *
     * @param parent
     * @param modal
     */
    public DialogoNuevaFacturaExtra(java.awt.Frame parent, boolean modal) {
<span class="nc" id="L36">        super(parent, modal);</span>
<span class="nc" id="L37">        initComponents();</span>
<span class="nc" id="L38">        this.setLocationRelativeTo(null);</span>
<span class="nc" id="L39">        ctporcenIva.setText(&quot;21&quot;);</span>
<span class="nc" id="L40">        ctNumF.setText(&quot;&quot; + GestoraDatos.dameGestora().get(FacturaExtra.getTabla()).devuelveNumeroSiguiente());</span>
<span class="nc" id="L41">    }</span>

    /**
     * This method is called from within the constructor to initialize the form. WARNING: Do NOT
     * modify this code. The content of this method is always regenerated by the Form Editor.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Generated Code&quot;&gt;//GEN-BEGIN:initComponents
    private void initComponents() {

<span class="nc" id="L51">        panelFondo = PanelImagen.dameNuevoPanelSinLetras();</span>
<span class="nc" id="L52">        bCancelar = new javax.swing.JButton();</span>
<span class="nc" id="L53">        bAceptar = new javax.swing.JButton();</span>
<span class="nc" id="L54">        jPanel7 = new JPanelTranslucido();</span>
<span class="nc" id="L55">        jLabel60 = new javax.swing.JLabel();</span>
<span class="nc" id="L56">        jScrollPane16 = new javax.swing.JScrollPane();</span>
<span class="nc" id="L57">        listaConceptos = new javax.swing.JList();</span>
<span class="nc" id="L58">        bAñade = new javax.swing.JButton();</span>
<span class="nc" id="L59">        bEditar = new javax.swing.JButton();</span>
<span class="nc" id="L60">        bBorra = new javax.swing.JButton();</span>
<span class="nc" id="L61">        jPanel5 = new JPanelTranslucido();</span>
<span class="nc" id="L62">        jLabel51 = new javax.swing.JLabel();</span>
<span class="nc" id="L63">        jLabel52 = new javax.swing.JLabel();</span>
<span class="nc" id="L64">        jLabel53 = new javax.swing.JLabel();</span>
<span class="nc" id="L65">        jLabel54 = new javax.swing.JLabel();</span>
<span class="nc" id="L66">        jLabel55 = new javax.swing.JLabel();</span>
<span class="nc" id="L67">        ctNumF = new javax.swing.JTextField();</span>
<span class="nc" id="L68">        ctBaseIm = new javax.swing.JTextField();</span>
<span class="nc" id="L69">        ctporcenIva = new javax.swing.JTextField();</span>
<span class="nc" id="L70">        ctTotal = new javax.swing.JTextField();</span>
<span class="nc" id="L71">        ctIvaa = new javax.swing.JTextField();</span>
<span class="nc" id="L72">        jLabel56 = new javax.swing.JLabel();</span>
<span class="nc" id="L73">        jPanel4 = new JPanelTranslucido();</span>
<span class="nc" id="L74">        jLabel45 = new javax.swing.JLabel();</span>
<span class="nc" id="L75">        jLabel46 = new javax.swing.JLabel();</span>
<span class="nc" id="L76">        jLabel47 = new javax.swing.JLabel();</span>
<span class="nc" id="L77">        jLabel48 = new javax.swing.JLabel();</span>
<span class="nc" id="L78">        jLabel49 = new javax.swing.JLabel();</span>
<span class="nc" id="L79">        jLabel50 = new javax.swing.JLabel();</span>
<span class="nc" id="L80">        ctNomb = new javax.swing.JTextField();</span>
<span class="nc" id="L81">        ctDomic = new javax.swing.JTextField();</span>
<span class="nc" id="L82">        ctLoca = new javax.swing.JTextField();</span>
<span class="nc" id="L83">        ctCodpos = new javax.swing.JTextField();</span>
<span class="nc" id="L84">        ctProvin = new javax.swing.JTextField();</span>
<span class="nc" id="L85">        ctNcif = new javax.swing.JTextField();</span>
<span class="nc" id="L86">        jPanel3 = new JPanelTranslucido();</span>
<span class="nc" id="L87">        jLabel44 = new javax.swing.JLabel();</span>
<span class="nc" id="L88">        rbCliEmp = new javax.swing.JRadioButton();</span>
<span class="nc" id="L89">        rbCliOcas = new javax.swing.JRadioButton();</span>
<span class="nc" id="L90">        jLabel1 = new javax.swing.JLabel();</span>
<span class="nc" id="L91">        ctFecha = new javax.swing.JTextField();</span>

<span class="nc" id="L93">        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);</span>

<span class="nc" id="L95">        bCancelar.setText(&quot;Cancelar&quot;);</span>

<span class="nc" id="L97">        bAceptar.setText(&quot;Generar&quot;);</span>
<span class="nc" id="L98">        bAceptar.addActionListener(new java.awt.event.ActionListener() {</span>
            public void actionPerformed(java.awt.event.ActionEvent evt) {
<span class="nc" id="L100">                bAceptarActionPerformed(evt);</span>
<span class="nc" id="L101">            }</span>
        });

<span class="nc" id="L104">        jPanel7.setBackground(new java.awt.Color(204, 204, 255));</span>

<span class="nc" id="L106">        jLabel60.setText(&quot;Conceptos:&quot;);</span>

<span class="nc" id="L108">        listaConceptos.setFont(new java.awt.Font(&quot;Monospaced&quot;, 0, 11)); // NOI18N</span>
<span class="nc" id="L109">        jScrollPane16.setViewportView(listaConceptos);</span>

<span class="nc" id="L111">        bAñade.setBackground(new java.awt.Color(204, 255, 204));</span>
<span class="nc" id="L112">        bAñade.setText(&quot;Añade&quot;);</span>
<span class="nc" id="L113">        bAñade.addActionListener(new java.awt.event.ActionListener() {</span>
            public void actionPerformed(java.awt.event.ActionEvent evt) {
<span class="nc" id="L115">                bAñadeActionPerformed(evt);</span>
<span class="nc" id="L116">            }</span>
        });

<span class="nc" id="L119">        bEditar.setBackground(new java.awt.Color(255, 153, 51));</span>
<span class="nc" id="L120">        bEditar.setText(&quot;Repara&quot;);</span>

<span class="nc" id="L122">        bBorra.setBackground(new java.awt.Color(255, 153, 153));</span>
<span class="nc" id="L123">        bBorra.setText(&quot;Borra&quot;);</span>

<span class="nc" id="L125">        javax.swing.GroupLayout jPanel7Layout = new javax.swing.GroupLayout(jPanel7);</span>
<span class="nc" id="L126">        jPanel7.setLayout(jPanel7Layout);</span>
<span class="nc" id="L127">        jPanel7Layout.setHorizontalGroup(</span>
<span class="nc" id="L128">            jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L129">            .addGroup(jPanel7Layout.createSequentialGroup()</span>
<span class="nc" id="L130">                .addContainerGap()</span>
<span class="nc" id="L131">                .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)</span>
<span class="nc" id="L132">                    .addComponent(jLabel60)</span>
<span class="nc" id="L133">                    .addComponent(bAñade)</span>
<span class="nc" id="L134">                    .addComponent(bEditar, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)</span>
<span class="nc" id="L135">                    .addComponent(bBorra, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))</span>
<span class="nc" id="L136">                .addGap(18, 18, 18)</span>
<span class="nc" id="L137">                .addComponent(jScrollPane16)</span>
<span class="nc" id="L138">                .addContainerGap())</span>
        );
<span class="nc" id="L140">        jPanel7Layout.setVerticalGroup(</span>
<span class="nc" id="L141">            jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L142">            .addGroup(jPanel7Layout.createSequentialGroup()</span>
<span class="nc" id="L143">                .addContainerGap()</span>
<span class="nc" id="L144">                .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L145">                    .addComponent(jScrollPane16)</span>
<span class="nc" id="L146">                    .addGroup(jPanel7Layout.createSequentialGroup()</span>
<span class="nc" id="L147">                        .addComponent(jLabel60)</span>
<span class="nc" id="L148">                        .addGap(18, 18, 18)</span>
<span class="nc" id="L149">                        .addComponent(bAñade)</span>
<span class="nc" id="L150">                        .addGap(18, 18, 18)</span>
<span class="nc" id="L151">                        .addComponent(bEditar)</span>
<span class="nc" id="L152">                        .addGap(18, 18, 18)</span>
<span class="nc" id="L153">                        .addComponent(bBorra)</span>
<span class="nc" id="L154">                        .addGap(0, 45, Short.MAX_VALUE)))</span>
<span class="nc" id="L155">                .addContainerGap())</span>
        );

<span class="nc" id="L158">        jPanel5.setBackground(new java.awt.Color(255, 255, 204));</span>

<span class="nc" id="L160">        jLabel51.setFont(new java.awt.Font(&quot;Tahoma&quot;, 1, 12)); // NOI18N</span>
<span class="nc" id="L161">        jLabel51.setForeground(new java.awt.Color(255, 153, 153));</span>
<span class="nc" id="L162">        jLabel51.setText(&quot;DATOS GENERALES DE LA FACTURA&quot;);</span>

<span class="nc" id="L164">        jLabel52.setText(&quot;Número de factura&quot;);</span>

<span class="nc" id="L166">        jLabel53.setText(&quot;Base imponible&quot;);</span>

<span class="nc" id="L168">        jLabel54.setText(&quot;IVA&quot;);</span>

<span class="nc" id="L170">        jLabel55.setForeground(new java.awt.Color(255, 102, 102));</span>
<span class="nc" id="L171">        jLabel55.setText(&quot;TOTAL&quot;);</span>

<span class="nc" id="L173">        ctNumF.setEditable(false);</span>

<span class="nc" id="L175">        ctTotal.setBackground(new java.awt.Color(255, 204, 204));</span>

<span class="nc" id="L177">        jLabel56.setText(&quot;%&quot;);</span>

<span class="nc" id="L179">        javax.swing.GroupLayout jPanel5Layout = new javax.swing.GroupLayout(jPanel5);</span>
<span class="nc" id="L180">        jPanel5.setLayout(jPanel5Layout);</span>
<span class="nc" id="L181">        jPanel5Layout.setHorizontalGroup(</span>
<span class="nc" id="L182">            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L183">            .addGroup(jPanel5Layout.createSequentialGroup()</span>
<span class="nc" id="L184">                .addContainerGap()</span>
<span class="nc" id="L185">                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L186">                    .addGroup(jPanel5Layout.createSequentialGroup()</span>
<span class="nc" id="L187">                        .addComponent(jLabel51)</span>
<span class="nc" id="L188">                        .addContainerGap(120, Short.MAX_VALUE))</span>
<span class="nc" id="L189">                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel5Layout.createSequentialGroup()</span>
<span class="nc" id="L190">                        .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)</span>
<span class="nc" id="L191">                            .addGroup(jPanel5Layout.createSequentialGroup()</span>
<span class="nc" id="L192">                                .addComponent(jLabel55)</span>
<span class="nc" id="L193">                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)</span>
<span class="nc" id="L194">                                .addComponent(ctTotal, javax.swing.GroupLayout.PREFERRED_SIZE, 72, javax.swing.GroupLayout.PREFERRED_SIZE))</span>
<span class="nc" id="L195">                            .addGroup(jPanel5Layout.createSequentialGroup()</span>
<span class="nc" id="L196">                                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L197">                                    .addComponent(jLabel52)</span>
<span class="nc" id="L198">                                    .addComponent(jLabel53)</span>
<span class="nc" id="L199">                                    .addGroup(jPanel5Layout.createSequentialGroup()</span>
<span class="nc" id="L200">                                        .addComponent(jLabel54)</span>
<span class="nc" id="L201">                                        .addGap(54, 54, 54)</span>
<span class="nc" id="L202">                                        .addComponent(ctporcenIva, javax.swing.GroupLayout.PREFERRED_SIZE, 27, javax.swing.GroupLayout.PREFERRED_SIZE)</span>
<span class="nc" id="L203">                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)</span>
<span class="nc" id="L204">                                        .addComponent(jLabel56)))</span>
<span class="nc" id="L205">                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)</span>
<span class="nc" id="L206">                                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)</span>
<span class="nc" id="L207">                                    .addComponent(ctIvaa, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.PREFERRED_SIZE, 54, javax.swing.GroupLayout.PREFERRED_SIZE)</span>
<span class="nc" id="L208">                                    .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)</span>
<span class="nc" id="L209">                                        .addComponent(ctNumF, javax.swing.GroupLayout.DEFAULT_SIZE, 54, Short.MAX_VALUE)</span>
<span class="nc" id="L210">                                        .addComponent(ctBaseIm)))))</span>
<span class="nc" id="L211">                        .addGap(35, 35, 35))))</span>
        );
<span class="nc" id="L213">        jPanel5Layout.setVerticalGroup(</span>
<span class="nc" id="L214">            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L215">            .addGroup(jPanel5Layout.createSequentialGroup()</span>
<span class="nc" id="L216">                .addContainerGap()</span>
<span class="nc" id="L217">                .addComponent(jLabel51)</span>
<span class="nc" id="L218">                .addGap(27, 27, 27)</span>
<span class="nc" id="L219">                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)</span>
<span class="nc" id="L220">                    .addComponent(jLabel52)</span>
<span class="nc" id="L221">                    .addComponent(ctNumF, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))</span>
<span class="nc" id="L222">                .addGap(18, 18, 18)</span>
<span class="nc" id="L223">                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)</span>
<span class="nc" id="L224">                    .addComponent(jLabel53)</span>
<span class="nc" id="L225">                    .addComponent(ctBaseIm, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))</span>
<span class="nc" id="L226">                .addGap(18, 18, 18)</span>
<span class="nc" id="L227">                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)</span>
<span class="nc" id="L228">                    .addComponent(jLabel54)</span>
<span class="nc" id="L229">                    .addComponent(ctporcenIva, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)</span>
<span class="nc" id="L230">                    .addComponent(ctIvaa, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)</span>
<span class="nc" id="L231">                    .addComponent(jLabel56))</span>
<span class="nc" id="L232">                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)</span>
<span class="nc" id="L233">                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)</span>
<span class="nc" id="L234">                    .addComponent(jLabel55)</span>
<span class="nc" id="L235">                    .addComponent(ctTotal, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))</span>
<span class="nc" id="L236">                .addGap(29, 29, 29))</span>
        );

<span class="nc" id="L239">        jPanel4.setBackground(new java.awt.Color(204, 204, 255));</span>

<span class="nc" id="L241">        jLabel45.setText(&quot;Nombre:&quot;);</span>

<span class="nc" id="L243">        jLabel46.setText(&quot;Domicilio:&quot;);</span>

<span class="nc" id="L245">        jLabel47.setText(&quot;Localidad:&quot;);</span>

<span class="nc" id="L247">        jLabel48.setText(&quot;C.P:&quot;);</span>

<span class="nc" id="L249">        jLabel49.setText(&quot;Provincia:&quot;);</span>

<span class="nc" id="L251">        jLabel50.setText(&quot;NIF/CIF:&quot;);</span>

<span class="nc" id="L253">        javax.swing.GroupLayout jPanel4Layout = new javax.swing.GroupLayout(jPanel4);</span>
<span class="nc" id="L254">        jPanel4.setLayout(jPanel4Layout);</span>
<span class="nc" id="L255">        jPanel4Layout.setHorizontalGroup(</span>
<span class="nc" id="L256">            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L257">            .addGroup(jPanel4Layout.createSequentialGroup()</span>
<span class="nc" id="L258">                .addContainerGap()</span>
<span class="nc" id="L259">                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L260">                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel4Layout.createSequentialGroup()</span>
<span class="nc" id="L261">                        .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L262">                            .addComponent(jLabel48)</span>
<span class="nc" id="L263">                            .addComponent(jLabel49)</span>
<span class="nc" id="L264">                            .addComponent(jLabel50))</span>
<span class="nc" id="L265">                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)</span>
<span class="nc" id="L266">                        .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)</span>
<span class="nc" id="L267">                            .addComponent(ctNcif, javax.swing.GroupLayout.DEFAULT_SIZE, 207, Short.MAX_VALUE)</span>
<span class="nc" id="L268">                            .addComponent(ctProvin)</span>
<span class="nc" id="L269">                            .addComponent(ctCodpos)</span>
<span class="nc" id="L270">                            .addComponent(ctLoca)))</span>
<span class="nc" id="L271">                    .addGroup(jPanel4Layout.createSequentialGroup()</span>
<span class="nc" id="L272">                        .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L273">                            .addGroup(jPanel4Layout.createSequentialGroup()</span>
<span class="nc" id="L274">                                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L275">                                    .addComponent(jLabel45)</span>
<span class="nc" id="L276">                                    .addComponent(jLabel46))</span>
<span class="nc" id="L277">                                .addGap(51, 51, 51)</span>
<span class="nc" id="L278">                                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L279">                                    .addComponent(ctDomic, javax.swing.GroupLayout.PREFERRED_SIZE, 206, javax.swing.GroupLayout.PREFERRED_SIZE)</span>
<span class="nc" id="L280">                                    .addComponent(ctNomb, javax.swing.GroupLayout.PREFERRED_SIZE, 207, javax.swing.GroupLayout.PREFERRED_SIZE)))</span>
<span class="nc" id="L281">                            .addComponent(jLabel47))</span>
<span class="nc" id="L282">                        .addGap(0, 0, Short.MAX_VALUE)))</span>
<span class="nc" id="L283">                .addGap(43, 43, 43))</span>
        );
<span class="nc" id="L285">        jPanel4Layout.setVerticalGroup(</span>
<span class="nc" id="L286">            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L287">            .addGroup(jPanel4Layout.createSequentialGroup()</span>
<span class="nc" id="L288">                .addGap(21, 21, 21)</span>
<span class="nc" id="L289">                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)</span>
<span class="nc" id="L290">                    .addComponent(jLabel45)</span>
<span class="nc" id="L291">                    .addComponent(ctNomb, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))</span>
<span class="nc" id="L292">                .addGap(18, 18, 18)</span>
<span class="nc" id="L293">                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)</span>
<span class="nc" id="L294">                    .addComponent(jLabel46)</span>
<span class="nc" id="L295">                    .addComponent(ctDomic, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))</span>
<span class="nc" id="L296">                .addGap(18, 18, 18)</span>
<span class="nc" id="L297">                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)</span>
<span class="nc" id="L298">                    .addComponent(jLabel47)</span>
<span class="nc" id="L299">                    .addComponent(ctLoca, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))</span>
<span class="nc" id="L300">                .addGap(18, 18, 18)</span>
<span class="nc" id="L301">                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)</span>
<span class="nc" id="L302">                    .addComponent(jLabel48)</span>
<span class="nc" id="L303">                    .addComponent(ctCodpos, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))</span>
<span class="nc" id="L304">                .addGap(18, 18, 18)</span>
<span class="nc" id="L305">                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)</span>
<span class="nc" id="L306">                    .addComponent(jLabel49)</span>
<span class="nc" id="L307">                    .addComponent(ctProvin, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))</span>
<span class="nc" id="L308">                .addGap(18, 18, 18)</span>
<span class="nc" id="L309">                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)</span>
<span class="nc" id="L310">                    .addComponent(jLabel50)</span>
<span class="nc" id="L311">                    .addComponent(ctNcif, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))</span>
<span class="nc" id="L312">                .addContainerGap(33, Short.MAX_VALUE))</span>
        );

<span class="nc" id="L315">        jPanel3.setBackground(new java.awt.Color(204, 204, 255));</span>

<span class="nc" id="L317">        jLabel44.setText(&quot;Seleccione:&quot;);</span>

<span class="nc" id="L319">        rbCliEmp.setText(&quot;Cliente Empresa&quot;);</span>

<span class="nc" id="L321">        rbCliOcas.setText(&quot;Cliente Ocasional&quot;);</span>

<span class="nc" id="L323">        jLabel1.setText(&quot;Fecha:&quot;);</span>

<span class="nc" id="L325">        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);</span>
<span class="nc" id="L326">        jPanel3.setLayout(jPanel3Layout);</span>
<span class="nc" id="L327">        jPanel3Layout.setHorizontalGroup(</span>
<span class="nc" id="L328">            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L329">            .addGroup(jPanel3Layout.createSequentialGroup()</span>
<span class="nc" id="L330">                .addContainerGap()</span>
<span class="nc" id="L331">                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)</span>
<span class="nc" id="L332">                    .addComponent(rbCliOcas, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)</span>
<span class="nc" id="L333">                    .addComponent(rbCliEmp)</span>
<span class="nc" id="L334">                    .addComponent(jLabel44)</span>
<span class="nc" id="L335">                    .addComponent(jLabel1)</span>
<span class="nc" id="L336">                    .addComponent(ctFecha))</span>
<span class="nc" id="L337">                .addContainerGap(23, Short.MAX_VALUE))</span>
        );
<span class="nc" id="L339">        jPanel3Layout.setVerticalGroup(</span>
<span class="nc" id="L340">            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L341">            .addGroup(jPanel3Layout.createSequentialGroup()</span>
<span class="nc" id="L342">                .addContainerGap()</span>
<span class="nc" id="L343">                .addComponent(jLabel44)</span>
<span class="nc" id="L344">                .addGap(18, 18, 18)</span>
<span class="nc" id="L345">                .addComponent(rbCliEmp)</span>
<span class="nc" id="L346">                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)</span>
<span class="nc" id="L347">                .addComponent(rbCliOcas)</span>
<span class="nc" id="L348">                .addGap(18, 18, 18)</span>
<span class="nc" id="L349">                .addComponent(jLabel1)</span>
<span class="nc" id="L350">                .addGap(18, 18, 18)</span>
<span class="nc" id="L351">                .addComponent(ctFecha, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)</span>
<span class="nc" id="L352">                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))</span>
        );

<span class="nc" id="L355">        javax.swing.GroupLayout panelFondoLayout = new javax.swing.GroupLayout(panelFondo);</span>
<span class="nc" id="L356">        panelFondo.setLayout(panelFondoLayout);</span>
<span class="nc" id="L357">        panelFondoLayout.setHorizontalGroup(</span>
<span class="nc" id="L358">            panelFondoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L359">            .addGap(0, 739, Short.MAX_VALUE)</span>
<span class="nc" id="L360">            .addGroup(panelFondoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L361">                .addGroup(panelFondoLayout.createSequentialGroup()</span>
<span class="nc" id="L362">                    .addContainerGap()</span>
<span class="nc" id="L363">                    .addGroup(panelFondoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L364">                        .addGroup(panelFondoLayout.createSequentialGroup()</span>
<span class="nc" id="L365">                            .addComponent(jPanel7, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)</span>
<span class="nc" id="L366">                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)</span>
<span class="nc" id="L367">                            .addComponent(jPanel3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))</span>
<span class="nc" id="L368">                        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, panelFondoLayout.createSequentialGroup()</span>
<span class="nc" id="L369">                            .addGap(0, 0, Short.MAX_VALUE)</span>
<span class="nc" id="L370">                            .addGroup(panelFondoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L371">                                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, panelFondoLayout.createSequentialGroup()</span>
<span class="nc" id="L372">                                    .addComponent(jPanel4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)</span>
<span class="nc" id="L373">                                    .addGap(18, 18, 18)</span>
<span class="nc" id="L374">                                    .addComponent(jPanel5, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))</span>
<span class="nc" id="L375">                                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, panelFondoLayout.createSequentialGroup()</span>
<span class="nc" id="L376">                                    .addComponent(bAceptar)</span>
<span class="nc" id="L377">                                    .addGap(18, 18, 18)</span>
<span class="nc" id="L378">                                    .addComponent(bCancelar)))))</span>
<span class="nc" id="L379">                    .addContainerGap()))</span>
        );
<span class="nc" id="L381">        panelFondoLayout.setVerticalGroup(</span>
<span class="nc" id="L382">            panelFondoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L383">            .addGap(0, 546, Short.MAX_VALUE)</span>
<span class="nc" id="L384">            .addGroup(panelFondoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L385">                .addGroup(panelFondoLayout.createSequentialGroup()</span>
<span class="nc" id="L386">                    .addContainerGap()</span>
<span class="nc" id="L387">                    .addGroup(panelFondoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)</span>
<span class="nc" id="L388">                        .addComponent(jPanel5, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)</span>
<span class="nc" id="L389">                        .addComponent(jPanel4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))</span>
<span class="nc" id="L390">                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)</span>
<span class="nc" id="L391">                    .addGroup(panelFondoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)</span>
<span class="nc" id="L392">                        .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)</span>
<span class="nc" id="L393">                        .addComponent(jPanel7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))</span>
<span class="nc" id="L394">                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)</span>
<span class="nc" id="L395">                    .addGroup(panelFondoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L396">                        .addComponent(bAceptar, javax.swing.GroupLayout.DEFAULT_SIZE, 34, Short.MAX_VALUE)</span>
<span class="nc" id="L397">                        .addComponent(bCancelar, javax.swing.GroupLayout.DEFAULT_SIZE, 34, Short.MAX_VALUE))</span>
<span class="nc" id="L398">                    .addContainerGap()))</span>
        );

<span class="nc" id="L401">        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());</span>
<span class="nc" id="L402">        getContentPane().setLayout(layout);</span>
<span class="nc" id="L403">        layout.setHorizontalGroup(</span>
<span class="nc" id="L404">            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L405">            .addComponent(panelFondo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)</span>
        );
<span class="nc" id="L407">        layout.setVerticalGroup(</span>
<span class="nc" id="L408">            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)</span>
<span class="nc" id="L409">            .addComponent(panelFondo, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)</span>
        );

<span class="nc" id="L412">        pack();</span>
<span class="nc" id="L413">    }// &lt;/editor-fold&gt;//GEN-END:initComponents</span>

    private void bAñadeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bAñadeActionPerformed
        
<span class="nc" id="L417">        DialogoNuevaFacturaDetalles dialogo = new DialogoNuevaFacturaDetalles((JFrame) this.getParent(), true,</span>
<span class="nc" id="L418">                Integer.parseInt(ctNumF.getText()), conceptos.size());</span>
<span class="nc" id="L419">        dialogo.setVisible(true);</span>
<span class="nc bnc" id="L420" title="All 2 branches missed.">        if(dialogo.getFactura() != null) {</span>
            
<span class="nc" id="L422">            conceptos.add(dialogo.getFactura());</span>
<span class="nc" id="L423">            listaConceptos.setListData(conceptosFormateados());</span>
<span class="nc bnc" id="L424" title="All 2 branches missed.">            ctBaseIm.setText(&quot;&quot; + (Float.parseFloat(ctBaseIm.getText().isEmpty()</span>
<span class="nc" id="L425">                    ? &quot;0&quot; : ctBaseIm.getText())</span>
<span class="nc" id="L426">                    + Float.parseFloat(dialogo.getFactura().get(&quot;IMPORTE&quot;).toString())));</span>
<span class="nc bnc" id="L427" title="All 2 branches missed.">            float base = Float.parseFloat(ctBaseIm.getText().isEmpty()</span>
<span class="nc" id="L428">                    ? &quot;0&quot; : ctBaseIm.getText());</span>
<span class="nc bnc" id="L429" title="All 2 branches missed.">            float iva = Float.parseFloat(ctporcenIva.getText().isEmpty()</span>
<span class="nc" id="L430">                    ? &quot;0&quot; : ctporcenIva.getText());</span>
<span class="nc" id="L431">            float total = (base * iva / 100);</span>
<span class="nc" id="L432">            ctIvaa.setText(&quot;&quot; + (total));</span>
<span class="nc" id="L433">            ctTotal.setText(&quot;&quot; + (total + base));</span>
        }
<span class="nc" id="L435">    }//GEN-LAST:event_bAñadeActionPerformed</span>

    private void bAceptarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bAceptarActionPerformed

<span class="nc bnc" id="L439" title="All 2 branches missed.">        if(insertarFacturaExtra()) {</span>
<span class="nc" id="L440">            this.dispose();</span>
        }
<span class="nc" id="L442">    }//GEN-LAST:event_bAceptarActionPerformed</span>
    
    private String[] conceptosFormateados() {
        
<span class="nc" id="L446">        String[] dev = new String[conceptos.size()];</span>
        
<span class="nc bnc" id="L448" title="All 2 branches missed.">        for(int i = 0;i &lt; dev.length;i++) {</span>
            
<span class="nc" id="L450">            dev[i] = Gestora.completarConEspaciosBlancosIzq(conceptos.get(i).get(&quot;CONCEPTO&quot;).toString(), 50)</span>
<span class="nc" id="L451">                    + &quot; | &quot; + Gestora.stringLongitudFijaIzq(conceptos.get(i).get(&quot;IMPORTE&quot;).toString(), &quot;      &quot;);</span>
        }
        
<span class="nc" id="L454">        return dev;</span>
    }
    
    private boolean insertarFacturaExtra() {
<span class="nc" id="L458">        String fecha = ctFecha.getText();</span>
        
<span class="nc bnc" id="L460" title="All 2 branches missed.">        if(!Gestora.comprobarFormatoFechaCorrecto(fecha)) {</span>
<span class="nc" id="L461">            JOptionPane.showMessageDialog(this, &quot;Comprueba las fechas, el formato es dd/mm/aaaa&quot;);</span>
<span class="nc bnc" id="L462" title="All 2 branches missed.">        } else if(!comprobarNumero(ctCodpos.getText())</span>
<span class="nc bnc" id="L463" title="All 2 branches missed.">                || !comprobarNumero(ctporcenIva.getText())</span>
<span class="nc bnc" id="L464" title="All 2 branches missed.">                || !comprobarNumero(ctNumF.getText())) {</span>
            
<span class="nc" id="L466">            JOptionPane.showMessageDialog(this, &quot;Comprueba que has introducido en los campos numéricos números correctamente.&quot;);</span>
        } else {
<span class="nc" id="L468">            FacturaExtra nuevaFacturaExtra = new FacturaExtra(Integer.parseInt(ctNumF.getText()), //NUMFACTURA</span>
                    new Fecha(fecha), //FECHA
<span class="nc" id="L470">                    ctNcif.getText(), //CIFNIF</span>
<span class="nc" id="L471">                    ctNomb.getText(), ctDomic.getText(), ctLoca.getText(), ctProvin.getText(),//NOMBRE,DOMICILIO,LOCALIDAD,PROVINCIA</span>
<span class="nc" id="L472">                    Integer.parseInt(ctCodpos.getText()), //CP</span>
<span class="nc" id="L473">                    Integer.parseInt(ctporcenIva.getText()), //TANTOIVA</span>
<span class="nc" id="L474">                    ctTotal.getText(), //EUROSNETO</span>
<span class="nc bnc" id="L475" title="All 2 branches missed.">                    (rbCliEmp.isSelected() ? &quot;SI&quot; : &quot;NO&quot;));//CLIENTE</span>

<span class="nc bnc" id="L477" title="All 2 branches missed.">            if(GestoraBaseDatos.insertarDato(nuevaFacturaExtra)) {</span>
<span class="nc" id="L478">                conceptos.stream().forEach((f) -&gt; {</span>
<span class="nc" id="L479">                    GestoraBaseDatos.insertarDato(f);</span>
<span class="nc" id="L480">                });</span>
<span class="nc" id="L481">                GestoraDatos.actualizaDatos(GestoraDatos.ACTUALIZAR_FACTURASEXTRA);</span>
<span class="nc" id="L482">                return true;</span>
            }else{
                
<span class="nc" id="L485">                JOptionPane.showMessageDialog(this, &quot;Ya existe&quot;);</span>
            }
        }
<span class="nc" id="L488">        return false;</span>
    }
    
    private boolean comprobarNumero(String n) {
        
<span class="nc" id="L493">        return Gestora.comprobarNumero(n);</span>
    }
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton bAceptar;
    private javax.swing.JButton bAñade;
    private javax.swing.JButton bBorra;
    private javax.swing.JButton bCancelar;
    private javax.swing.JButton bEditar;
    private javax.swing.JTextField ctBaseIm;
    private javax.swing.JTextField ctCodpos;
    private javax.swing.JTextField ctDomic;
    private javax.swing.JTextField ctFecha;
    private javax.swing.JTextField ctIvaa;
    private javax.swing.JTextField ctLoca;
    private javax.swing.JTextField ctNcif;
    private javax.swing.JTextField ctNomb;
    private javax.swing.JTextField ctNumF;
    private javax.swing.JTextField ctProvin;
    private javax.swing.JTextField ctTotal;
    private javax.swing.JTextField ctporcenIva;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel44;
    private javax.swing.JLabel jLabel45;
    private javax.swing.JLabel jLabel46;
    private javax.swing.JLabel jLabel47;
    private javax.swing.JLabel jLabel48;
    private javax.swing.JLabel jLabel49;
    private javax.swing.JLabel jLabel50;
    private javax.swing.JLabel jLabel51;
    private javax.swing.JLabel jLabel52;
    private javax.swing.JLabel jLabel53;
    private javax.swing.JLabel jLabel54;
    private javax.swing.JLabel jLabel55;
    private javax.swing.JLabel jLabel56;
    private javax.swing.JLabel jLabel60;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JPanel jPanel7;
    private javax.swing.JScrollPane jScrollPane16;
    private javax.swing.JList listaConceptos;
    private javax.swing.JPanel panelFondo;
    private javax.swing.JRadioButton rbCliEmp;
    private javax.swing.JRadioButton rbCliOcas;
    // End of variables declaration//GEN-END:variables
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.4.201502262128</span></div></body></html>